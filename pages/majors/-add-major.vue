<template>
    <div class="add-row">
      <app-button raised class="btn" @click.prevent="openDialog">
        <mwc-icon class="icon">add</mwc-icon>
        Thêm mới
      </app-button>
      <app-dialog :visible="visibleDialog" @closed="closeDialog">
        <major-dialog :majors="majors" @closed="closeDialog" @submit="onSubmit"></major-dialog>
      </app-dialog>
    </div>
  </template>
  <script>
  import MajorDialog from '~/pages/majors/-major-dialog';
  import { fetchListMajors } from '~/models/majors.model';
  import { pathified } from '~/utils';
  const majorStore = pathified('majors');
  export default {
    components: { MajorDialog },
    data() {
      return {
        visibleDialog: false,
        majors: [],
      };
    },
    methods: {
      async openDialog() {
        this.visibleDialog = true;
        this.majors = await fetchListMajors();
      },
      closeDialog() {
        this.visibleDialog = false;
      },
      async onSubmit(payload) {
        await majorStore.$dispatch('createMajors', payload);
        await majorStore.$dispatch('getListMajors');
      },
    },
  };
  </script>
  <style lang="scss" scoped>
  .add-row {
    padding: 12px 48px 12px 25px;
    > .btn {
      width: 200px;
      height: 36px;
      background: #d3d8ea;
      //   border: 1px solid #000000;
      cursor: pointer;
      --mdc-theme-primary: var(--color-primary);
      --mdc-button-horizontal-padding: 10px;
    }
    --mdc-shape-medium: 15px;
  }
  </style>
  